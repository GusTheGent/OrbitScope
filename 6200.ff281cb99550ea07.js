"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6200],{6200:(L,c,s)=>{s.r(c),s.d(c,{ApodPageModule:()=>x});var p=s(1368),u=s(4716),n=s(2112),l=s(8271),f=s(1528),e=s(4496),h=s(5988);const y={pageTitle:"Astronomy Picture of the Day",pageDescription:"One of the most popular websites at NASA is the Astronomy Picture of the Day. In fact, this website is one of the most popular websites across all federal agencies. It has the popular appeal of a Justin Bieber video. This endpoint structures the APOD imagery and associated metadata so that it can be repurposed for other applications. In addition, if the concept_tags parameter is set to True, then keywords derived from the image explanation are returned. These keywords could be used as auto-generated hashtags for twitter or instagram feeds but generally help with discoverability of relevant imagery.",pageSource:"https://api.nasa.gov/"};var g=s(7048),m=s(6716),A=s(8996);let C=(()=>{var t;class r{constructor(){this.http=(0,e.uUt)(g.KK),this.BASE_URL=m.O.BASE_URL}getPlanetaryAPOD(o){const i=(new g.i4).set("api_key",m.O.API_KEY).set("date",o);return this.http.get(`${this.BASE_URL}/${A.i.APOD_PLANETARY}`,{params:i})}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.wxM({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var I=s(9144),v=s(8960),P=s(8824),D=s(5272),E=s(4476);function O(t,r){1&t&&e.wR5(0,"ion-progress-bar",6)}function R(t,r){if(1&t){const a=e.KQA();e.I0R(0,"ion-img",7),e.qCj("ionImgDidLoad",function(i){e.usT(a);const d=e.GaO();return e.CGJ(d.onImageLoaded(i))}),e.C$Y()}if(2&t){const a=e.GaO();e.E7m("src",a.apodData.url)}}function G(t,r){if(1&t&&e.wR5(0,"iframe",8),2&t){const a=e.GaO();e.E7m("src",a.getYouTubeEmbedUrl(a.apodData.url),e.CaN)}}function _(t,r){1&t&&(e.I0R(0,"ion-button"),e.OEk(1,"HD picture"),e.C$Y())}let Y=(()=>{var t;class r{constructor(){this.imageLoading=!0,this.sanitizer=(0,e.uUt)(E.mI)}ngOnInit(){console.log(this.apodData)}onImageLoaded(o){this.imageLoading=!1,console.log("IMage load",o)}getYouTubeEmbedUrl(o){const d=`https://www.youtube.com/embed/${this.extractVideoId(o)}`;return this.sanitizer.bypassSecurityTrustResourceUrl(d)}extractVideoId(o){const d=o.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return d?d[1]:null}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.In1({type:t,selectors:[["app-apod-card"]],inputs:{apodData:"apodData"},decls:12,vars:7,consts:[[1,"ion-padding"],["type","indeterminate",4,"ngIf"],["alt","Not Available",3,"src","ionImgDidLoad",4,"ngIf"],["frameborder","0","allowfullscreen","",3,"src",4,"ngIf"],["color","primary"],[4,"ngIf"],["type","indeterminate"],["alt","Not Available",3,"src","ionImgDidLoad"],["frameborder","0","allowfullscreen","",3,"src"]],template:function(o,i){1&o&&(e.I0R(0,"ion-card",0),e.yuY(1,O,1,0,"ion-progress-bar",1)(2,R,1,1,"ion-img",2)(3,G,1,1,"iframe",3),e.I0R(4,"ion-card-header")(5,"ion-card-title"),e.OEk(6),e.C$Y(),e.I0R(7,"ion-card-subtitle",4),e.OEk(8),e.C$Y()(),e.I0R(9,"ion-card-content"),e.OEk(10),e.C$Y(),e.yuY(11,_,2,0,"ion-button",5),e.C$Y()),2&o&&(e.yG2(),e.E7m("ngIf",i.imageLoading&&"image"===i.apodData.media_type),e.yG2(),e.E7m("ngIf","image"===i.apodData.media_type),e.yG2(),e.E7m("ngIf","video"===i.apodData.media_type),e.yG2(3),e.cNF(i.apodData.title),e.yG2(2),e.oRS(" ",i.apodData.copyright?"Copyright: "+i.apodData.copyright:i.apodData.date," "),e.yG2(2),e.oRS(" ",i.apodData.explanation," "),e.yG2(),e.E7m("ngIf","image"===i.apodData.media_type))},dependencies:[p.u_,n.sn,n.KC,n.Gg,n.YY,n.MN,n.I7,n.Eh,n.WU],styles:["ion-card-header[_ngcontent-%COMP%]{text-align:start}ion-card-content[_ngcontent-%COMP%]{text-align:start}iframe[_ngcontent-%COMP%]{display:block;background:#000;border:none;width:100%;height:350px}"]}),r})();function M(t,r){if(1&t&&(e.I0R(0,"ion-col"),e.wR5(1,"app-apod-card",14),e.C$Y()),2&t){const a=r.ngIf;e.yG2(),e.E7m("apodData",a)}}function b(t,r){if(1&t){const a=e.KQA();e.I0R(0,"ion-content",15)(1,"ion-datetime",16),e.qCj("ionChange",function(i){e.usT(a);const d=e.GaO();return e.CGJ(d.onDateSelection(i))}),e.C$Y()()}if(2&t){const a=e.GaO();e.yG2(),e.E7m("value",a.datePickerValue)}}function T(t,r){1&t&&e.wR5(0,"ion-spinner",17)}function w(t,r){if(1&t&&(e.I0R(0,"span",18),e.OEk(1),e.C$Y()),2&t){const a=e.GaO();e.yG2(),e.cNF(a.errorMessage)}}const $=[{path:"",component:(()=>{var t;class r{constructor(){this.modalController=(0,e.uUt)(n.qS),this.apodService=(0,e.uUt)(C),this.datePickerValue=this.formatDate(new Date),this.isLoading=!0}ngOnInit(){this.fetchApodData()}onViewPageInfo(){var o=this;return(0,f.c)(function*(){yield(yield o.modalController.create({component:h.y,componentProps:{data:y},cssClass:"page-info-modal"})).present()})()}onDateSelection(o){this.isLoading=!0,this.datePickerValue=o.detail.value,this.fetchApodData(),this.apod$&&(this.errorMessage="")}fetchApodData(){this.apod$=this.apodService.getPlanetaryAPOD(this.datePickerValue).pipe((0,I.a)(o=>(this.errorMessage=o.error.msg,v.k)),(0,P.U)(()=>{this.isLoading=!1}))}formatDate(o){return(0,p._m)(o,"yyyy-MM-dd","en-US")}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.In1({type:t,selectors:[["app-apod"]],decls:28,vars:10,consts:[[3,"translucent"],["slot","start"],[1,"content",3,"fullscreen"],[1,"ion-padding",3,"fixed"],["id","open-datepicker","lines","none","button","true"],["position","fixed"],["slot","start","id","open-datepicker","name","calendar","color","primary"],["slot","end","color","primary"],[4,"ngIf","ngIfElse"],["collapse","fade",3,"translucent"],[3,"click"],["trigger","open-datepicker"],["name","circles",4,"ngIf"],["errorTemplate",""],[3,"apodData"],[1,"ion-padding"],["presentation","date","size","cover","showDefaultButtons","true",3,"value","ionChange"],["name","circles"],[1,"error-message"]],template:function(o,i){if(1&o&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.wR5(3,"ion-menu-button"),e.C$Y(),e.I0R(4,"ion-title"),e.OEk(5,"Astronomy Picture of the Day"),e.C$Y()()(),e.I0R(6,"ion-content",2)(7,"ion-grid",3)(8,"ion-row")(9,"ion-col")(10,"ion-item",4)(11,"ion-label",5),e.OEk(12,"Pick Date"),e.C$Y(),e.wR5(13,"ion-icon",6),e.I0R(14,"ion-text",7),e.OEk(15),e.C$Y()()()(),e.I0R(16,"ion-row"),e.yuY(17,M,2,1,"ion-col",8),e.wVc(18,"async"),e.C$Y()()(),e.I0R(19,"ion-footer",9)(20,"ion-toolbar")(21,"ion-title")(22,"app-page-info",10),e.qCj("click",function(){return i.onViewPageInfo()}),e.C$Y()()()(),e.I0R(23,"ion-modal",11),e.yuY(24,b,2,1,"ng-template"),e.C$Y(),e.yuY(25,T,1,0,"ion-spinner",12)(26,w,2,1,"ng-template",null,13,e.gJz)),2&o){const d=e.Gew(27);e.E7m("translucent",!0),e.yG2(6),e.E7m("fullscreen",!1),e.yG2(),e.E7m("fixed",!0),e.yG2(8),e.cNF(i.datePickerValue),e.yG2(2),e.E7m("ngIf",e.kDX(18,8,i.apod$))("ngIfElse",d),e.yG2(2),e.E7m("translucent",!0),e.yG2(6),e.E7m("ngIf",i.isLoading)}},dependencies:[p.u_,n.GS,n.Kk,n._i,n.on,n.eV,n.YP,n.wB,n.Ko,n.Yb,n.QR,n.QT,n.qo,n.YA,n.Wg,n.tM,n.Md,n.yc,n.IT,D.m,Y,p.a],styles:["ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-col[_ngcontent-%COMP%]{text-align:center}ion-item[_ngcontent-%COMP%]{--background-hover: var(--ion-color-primary)}ion-spinner[_ngcontent-%COMP%]{width:50px;height:50px;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}#open-datepicker[_ngcontent-%COMP%]{cursor:pointer}.error-message[_ngcontent-%COMP%]{font-weight:700;text-align:center;color:var(--ion-color-danger);position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}"]}),r})()}];let S=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[l.qQ.forChild($),l.qQ]}),r})();var k=s(9280);let x=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[p.MD,u.y,n.wZ,S,k.k]}),r})()}}]);